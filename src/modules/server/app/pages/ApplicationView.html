<header class="row">
    <div class="title" data-status="{{getStatus(app.online)}}">
        <h1 class="title">{{app.identifier}}</h1>
        <span class="tag tag-status tag-small">
        </span>
    </div>
    <Button to="/application/{{appid}}/edit" text="Edit Application" type="edit" />
</header>


<Chart title="Probe Latency" />

<div class="layout-w">

    <ul class="tab-menu">
        <li class="active">
            <a href="#info" title="Info">Info</a>
        </li>
        <li>
            <a href="#services" title="Services">Services</a>
        </li>
    </ul>

    <section id="info">
        <h2>Information</h2>
        <div class="layout-2-cols">
            <article class="panel-white panel-1 col-left">
                <table class="table-cols">
                    <tbody>
                        <tr>
                            <td>App ID:</td>
                            <td>{{app.appId}}</td>
                        </tr>
                        <tr>
                            <td>Hostname:</td>
                            <td>{{app.hostname}}</td>
                        </tr>
                        <tr>
                            <td>Identifier:</td>
                            <td>{{app.identifier}}</td>
                        </tr>
                        <tr>
                            <td>Environment:</td>
                            <td>{{app.environment}}</td>
                        </tr>
                        <tr>
                            <td>Created At:</td>
                            <td>{{app.createdAt}}</td>
                        </tr>
                        <tr>
                            <td>Updated At:</td>
                            <td>{{app.updatedAt}}</td>
                        </tr>
                    </tbody>
                </table>
                <h3>Metadata</h3>
                <hr>
                <table class="table-cols-mixed">
                    <tbody>
                        <tr class="t-mixed-title">
                            <td>Health</td>
                        </tr>
                        <tr class="t-mixed-details">
                            <td>URL:</td>
                            <td>http://hotdesk.example.net/api/health</td>
                        </tr>
                        <tr class="t-mixed-title">
                            <td>REPL</td>
                        </tr>
                        <tr class="t-mixed-details">
                            <td>Port:</td>
                            <td>4567</td>
                        </tr>
                        <tr class="t-mixed-title">
                            <td>Server</td>
                        </tr>
                        <tr class="t-mixed-details">
                            <td>Port:</td>
                            <td>9876</td>
                        </tr>
                    </tbody>
                </table>
            </article>

            <div class="col col-right">
                <article class="row row-vCentered">
                    <div class="chart-circle">
                        <div class="chart-circle__chart"></div>
                        <div>
                            <p class="chart-circle__title">Uptime</p>
                            <p class="chart-circle__value">100%</p>
                        </div>
                    </div>
                    <div class="chart-bar">
                        <p class="chart-bar__title">24 Hours Uptime</p>
                        <div class="chart-bar__chart"></div>
                    </div>
                </article>

                <article class="panel-white panel-2">
                    <div class="chart-bars">
                        <p class="chart_bars__title">Average Latency</p>
                        <div class="chart_bars__chart"></div>
                    </div>
                </article>

                <article>
                    <h2>Last Week Outages</h2>
                    <table class="table-rows">
                        <tbody>
                            <tr>
                                <td>ECONNREFUSED</td>
                                <td>03:32</td>
                                <td>Wed, 31 Jan 2018 02:24:23</td>
                            </tr>
                            <tr>
                                <td>ECONNREFUSED</td>
                                <td>07:02</td>
                                <td>Mon, 12 Dec 2017 23:14:37</td>
                            </tr>
                            <tr>
                                <td>ECONNREFUSED</td>
                                <td>01:31</td>
                                <td>Wed, 31 Jan 2018 13:48:42</td>
                            </tr>
                        </tbody>
                    </table>
                </article>
            </div>
    </section>
</div>

<script>
    import api from '../services/api';
    import Button from '../components/Button.html';
    import Chart from '../components/ProbeChart.html';

    export default {

        oncreate() {
            const appid = this.get('appid');
            const request = api.getApplication(appid).then(app => {
                this.set({ app });
            });

            window.page = this;
        },
        components: {
            Button,
            Chart,
        },
        helpers: {
            getStatus(online) {
                return online ? 'online' : 'offline';
            }
        },
        data() {
            return {
                app: {}
            }
        }
    }
</script>